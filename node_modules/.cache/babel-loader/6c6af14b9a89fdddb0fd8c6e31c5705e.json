{"ast":null,"code":"import _regeneratorRuntime from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";// body component for loading stuff about an individual movie\n// when the user clicks on it\nimport React from\"react\";import\"../index.css\";import{TiPlusOutline,TiMinusOutline}from\"react-icons/ti\";import{auth,db}from\"./Firebase\";import firebase from\"firebase\";import{Button,Card,CardGroup,CardText,CardTitle,CardSubtitle,Container,Row,Col,Media,CardImg}from\"reactstrap\";var Movie=/*#__PURE__*/function(_React$Component){_inherits(Movie,_React$Component);function Movie(props){var _this;_classCallCheck(this,Movie);_this=_possibleConstructorReturn(this,_getPrototypeOf(Movie).call(this,props));_this.state={movie:{},movies:{},loading:true,isAdd:false,thisMovie:\"\",isMounted:false};_this.addToWatchlist=_this.addToWatchlist.bind(_assertThisInitialized(_this));_this.removeFromWatchlist=_this.removeFromWatchlist.bind(_assertThisInitialized(_this));return _this;}_createClass(Movie,[{key:\"addToWatchlist\",value:function addToWatchlist(){var watchlistRef=db.collection(\"user\").doc(auth.currentUser.email);watchlistRef.update({watchlist:firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)});alert(\"adding to watchlist\");this.setWatchList=this.setWatchList.bind(this);this.checkExists=this.checkExists.bind(this);}},{key:\"removeFromWatchlist\",value:function removeFromWatchlist(){var watchlistRef=db.collection(\"user\").doc(auth.currentUser.email);watchlistRef.update({watchlist:firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)});alert(\"removing from watchlist\");}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({isMounted:true});fetch(\"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\"+this.props.location.id,{method:\"GET\",headers:{\"x-rapidapi-host\":\"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\"x-rapidapi-key\":\"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"}}).then(function(response){response.json().then(function(data){_this2.setState({movie:data,thisMovie:data.id});auth.onAuthStateChanged(function(user){var currentState=_this2,thisMovie=currentState.state.thisMovie;if(user&&currentState.state.isMounted&&thisMovie!==\"\"){var docRef=db.collection(\"user\").doc(auth.currentUser.email);docRef.get().then(function(doc){var newWatchlist=doc.data().watchlist;var index=newWatchlist.indexOf(thisMovie);if(index>-1){currentState.setState({isAdd:true});}}).catch(function(error){console.log(\"Error getting document:\",error);});}});});}).catch(function(err){console.log(err);});fetch(\"https://www.omdbapi.com/?apikey=1e54e73e&i=\"+this.props.location.id).then(function(response){response.json().then(function(data){_this2.setState({movies:data});});}).catch(function(err){console.log(err);});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"setWatchList\",value:function setWatchList(id){var userRef=db.collection(\"user\").doc(auth.currentUser.email);if(this.state.isAdd){userRef.get().then(function(doc){var newWatchlist=doc.data().watchlist;var index=newWatchlist.indexOf(id);if(index>-1){newWatchlist.splice(index,1);}userRef.update({watchlist:newWatchlist});}).catch(function(error){console.log(error);});this.setState({isAdd:!this.state.isAdd});}else{userRef.get().then(function(doc){var newWatchlist=doc.data().watchlist;newWatchlist.push(id);userRef.update({watchlist:newWatchlist});}).catch(function(error){console.log(error);});this.setState({isAdd:!this.state.isAdd});}}},{key:\"render\",value:function render(){var _this3=this;{/* \n    The purpose of the code inside this 'render' is to map over the cast of the movie and divide them evenly into two arrays, because I want to\n    display the cast in two columns instead of one so that the page doesn't end up being too long. This way we can map over each of these two arrays\n    in their own card and build some html to return   \n    */}var arr1=[];var arr2=[];var counter=0;if(this.state.movie.cast!==undefined){this.state.movie.cast.map(function(item){if(counter%2==0){arr1.push(item);}else{arr2.push(item);}counter++;});}return React.createElement(Container,{key:\"\"},this.state.movie?React.createElement(\"div\",{id:\"card-body\"},React.createElement(\"div\",{id:\"title-and-btn\"},React.createElement(\"a\",{title:\"if u stan imdb...\",className:\"movie-title\",rel:\"noopener noreferrer\",target:\"_blank\",href:\"https://www.imdb.com/title/\"+this.state.movie.id},this.state.movie.title,\" (\",this.state.movie.year,\")\"),React.createElement(\"div\",{className:\"movie-btn\"},React.createElement(Button,{onClick:function onClick(){_this3.setWatchList(_this3.state.movie.id);},className:\"movie-rl-btn\"},this.state.isAdd?React.createElement(TiMinusOutline,null):React.createElement(TiPlusOutline,null),\"watchlist\"))),React.createElement(CardGroup,null,React.createElement(Card,{id:\"poster\"},this.state.movie.poster?React.createElement(CardImg,{top:true,width:\"100%\",src:this.state.movie.poster}):\"\"),React.createElement(Card,null,React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Directed by: \",React.createElement(\"div\",{className:\"movie-info-inline\"},this.state.movies.Director))),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Rated,\" | \",this.state.movies.Runtime,\" | \",this.state.movies.Released)),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Countries Released: \",React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Country,\" \"))),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Translations: \",React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Language))),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"IMDb rating: \",React.createElement(\"div\",{className:\"movie-info-inline\"},this.state.movies.imdbRating))),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Metascore: \",React.createElement(\"div\",{className:\"movie-info-inline\"},this.state.movies.Metascore))),this.state.movies.Production?React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Production: \",React.createElement(\"div\",{className:\"movie-info-inline\"},this.state.movies.Production))):\"\",React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Awards: \",React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Awards))),React.createElement(CardSubtitle,null,React.createElement(\"div\",{className:\"movie-director\"},\"Plot: \",React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Plot))))),React.createElement(\"div\",{className:\"movie-title-2\"},\"Cast\"),React.createElement(CardGroup,null,React.createElement(Card,null,arr1?arr1.map(function(item){return React.createElement(Row,{key:\"yay\"},React.createElement(\"div\",{className:\"movie-actor\"},React.createElement(\"a\",{title:\"visit fav actor\",className:\"movie-actor-link\",rel:\"noopener noreferrer\",target:\"_blank\",href:'https://www.imdb.com/name/'+item.actor_id},React.createElement(\"div\",{className:\"actor\"},item.actor)),\" \",React.createElement(\"div\",{className:\"character\"},\" as \"),React.createElement(\"div\",{className:\"character\"},item.character)));}):\"\"),React.createElement(Card,null,arr2?arr2.map(function(item){return React.createElement(Row,{key:\"yay\"},React.createElement(\"div\",{className:\"movie-actor\"},React.createElement(\"a\",{title:\"visit fav actor\",className:\"movie-actor-link\",rel:\"noopener noreferrer\",target:\"_blank\",href:'https://www.imdb.com/name/'+item.actor_id},React.createElement(\"div\",{className:\"actor\"},item.actor)),\" \",React.createElement(\"div\",{className:\"character\"},\" as \"),React.createElement(\"div\",{className:\"character\"},item.character)));}):\"\"))):React.createElement(Media,null,\"wait a sec bru\"));}}]);return Movie;}(React.Component);export default Movie;","map":{"version":3,"sources":["/home/lishi/Desktop/fullstack/movie-fanatic-club/src/components/Movie.js"],"names":["React","TiPlusOutline","TiMinusOutline","auth","db","firebase","Button","Card","CardGroup","CardText","CardTitle","CardSubtitle","Container","Row","Col","Media","CardImg","Movie","props","state","movie","movies","loading","isAdd","thisMovie","isMounted","addToWatchlist","bind","removeFromWatchlist","watchlistRef","collection","doc","currentUser","email","update","watchlist","firestore","FieldValue","arrayUnion","id","alert","setWatchList","checkExists","arrayRemove","setState","fetch","location","method","headers","then","response","json","data","onAuthStateChanged","user","currentState","docRef","get","newWatchlist","index","indexOf","catch","error","console","log","err","userRef","splice","push","arr1","arr2","counter","cast","undefined","map","item","title","year","poster","Director","Rated","Runtime","Released","Country","Language","imdbRating","Metascore","Production","Awards","Plot","actor_id","actor","character","Component"],"mappings":"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","sourcesContent":["// body component for loading stuff about an individual movie\n// when the user clicks on it\n\nimport React from \"react\";\nimport \"../index.css\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\nimport {\n  Button,\n  Card,\n  CardGroup,\n  CardText,\n  CardTitle,\n  CardSubtitle,\n  Container,\n  Row,\n  Col,\n  Media,\n  CardImg\n} from \"reactstrap\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false,\n      thisMovie: \"\",\n      isMounted: false\n    };\n\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this)\n    this.checkExists = this.checkExists.bind(this)\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  async componentDidMount() {\n    this.setState({ isMounted: true })\n\n    fetch(\n      \"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" +\n      this.props.location.id,\n      {\n        method: \"GET\",\n        headers: {\n          \"x-rapidapi-host\":\n            \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n          \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n        }\n      }\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movie: data,\n            thisMovie: data.id\n          })\n\n          auth.onAuthStateChanged(user => {\n            let currentState = this, thisMovie = currentState.state.thisMovie\n            if (user && currentState.state.isMounted && thisMovie !== \"\") {\n              var docRef = db.collection(\"user\").doc(auth.currentUser.email);\n              docRef\n                .get()\n                .then(function (doc) {\n                  var newWatchlist = doc.data().watchlist;\n                  var index = newWatchlist.indexOf(thisMovie)\n                  if (index > -1) {\n                    currentState.setState({\n                      isAdd: true\n                    })\n                  }\n\n                })\n                .catch(function (error) {\n                  console.log(\"Error getting document:\", error);\n                });\n            }\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n\n    fetch(\n      \"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movies: data\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email)\n    if (this.state.isAdd) {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          var index = newWatchlist.indexOf(id)\n          if (index > -1) {\n            newWatchlist.splice(index, 1)\n          }\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n    else {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          newWatchlist.push(id)\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n  }\n\n  render() {\n    {/* \n    The purpose of the code inside this 'render' is to map over the cast of the movie and divide them evenly into two arrays, because I want to\n    display the cast in two columns instead of one so that the page doesn't end up being too long. This way we can map over each of these two arrays\n    in their own card and build some html to return   \n    */}\n    var arr1 = [];\n    var arr2 = [];\n    var counter = 0;\n\n    if (this.state.movie.cast !== undefined) {\n      this.state.movie.cast.map(item => {\n        if (counter % 2 == 0) {\n          arr1.push(item);\n        } else {\n          arr2.push(item);\n        }\n        counter++;\n      })\n    }\n\n    return (\n      <Container key=\"\">\n        {this.state.movie ?\n          <div id=\"card-body\">\n            <div id=\"title-and-btn\">\n              <a title=\"if u stan imdb...\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={\"https://www.imdb.com/title/\" + this.state.movie.id}>{this.state.movie.title} ({this.state.movie.year})</a>\n              <div className=\"movie-btn\">\n                <Button\n                  onClick={() => {\n                    this.setWatchList(this.state.movie.id)\n                  }}\n                  className=\"movie-rl-btn\">{this.state.isAdd ? <TiMinusOutline /> : <TiPlusOutline />}\n                watchlist\n              </Button>\n              </div>\n            </div>\n\n            <CardGroup>\n              <Card id=\"poster\">\n                {this.state.movie.poster ?\n                  <CardImg top width=\"100%\" src={this.state.movie.poster}>\n                  </CardImg>\n                  : \"\"}\n              </Card>\n              <Card>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Directed by: <div className=\"movie-info-inline\">{this.state.movies.Director}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-info\">{this.state.movies.Rated} | {this.state.movies.Runtime} | {this.state.movies.Released}</div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Countries Released: <div className=\"movie-info\">{this.state.movies.Country} </div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Translations: <div className=\"movie-info\">{this.state.movies.Language}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">IMDb rating: <div className=\"movie-info-inline\">{this.state.movies.imdbRating}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Metascore: <div className=\"movie-info-inline\">{this.state.movies.Metascore}</div></div>\n                </CardSubtitle>\n                {this.state.movies.Production ?\n                  <CardSubtitle>\n                    <div className=\"movie-director\">Production: <div className=\"movie-info-inline\">{this.state.movies.Production}</div></div>\n                  </CardSubtitle> : \"\"}\n                <CardSubtitle>\n                  <div className=\"movie-director\">Awards: <div className=\"movie-info\">{this.state.movies.Awards}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Plot: <div className=\"movie-info\">{this.state.movies.Plot}</div></div>\n                </CardSubtitle>\n              </Card>\n            </CardGroup>\n            <div className=\"movie-title-2\">Cast</div>\n            <CardGroup>\n              <Card>\n                {arr1 ?\n                  arr1.map(item => {\n                    return (\n                      <Row key=\"yay\"><div className=\"movie-actor\">\n                        <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}><div className=\"actor\">{item.actor}</div></a> <div className=\"character\"> as </div><div className=\"character\">{item.character}</div>\n                      </div></Row>\n                    )\n                  })\n                  : \"\"}\n              </Card>\n              <Card>\n                {arr2 ?\n                  arr2.map(item => {\n                    return (\n                      <Row key=\"yay\"><div className=\"movie-actor\">\n                        <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}><div className=\"actor\">{item.actor}</div></a> <div className=\"character\"> as </div><div className=\"character\">{item.character}</div>\n                      </div></Row>\n                    )\n                  })\n                  : \"\"}\n              </Card>\n            </CardGroup>\n          </div>\n          : <Media>wait a sec bru</Media>}\n      </Container>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}