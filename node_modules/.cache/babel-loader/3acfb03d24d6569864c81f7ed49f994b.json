{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\molli\\\\Desktop\\\\full-stack\\\\movie-fanatic-club\\\\movie-fanatic-club\\\\src\\\\components\\\\Movie.js\";\n// body component for loading stuff about an individual movie\n// when the user clicks on it\nimport React from \"react\";\nimport \"../index.css\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\nimport { Button, Card, CardGroup, CardText, CardTitle, CardSubtitle, Container, Row, Col, Media, CardImg } from \"reactstrap\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false,\n      thisMovie: \"\",\n      isMounted: false\n    };\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this);\n    this.checkExists = this.checkExists.bind(this);\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  async componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    fetch(\"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" + this.props.location.id, {\n      method: \"GET\",\n      headers: {\n        \"x-rapidapi-host\": \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n        \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n      }\n    }).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movie: data,\n          thisMovie: data.id\n        });\n        auth.onAuthStateChanged(user => {\n          let currentState = this,\n              thisMovie = currentState.state.thisMovie;\n\n          if (user && currentState.state.isMounted && thisMovie !== \"\") {\n            var docRef = db.collection(\"user\").doc(auth.currentUser.email);\n            docRef.get().then(function (doc) {\n              var newWatchlist = doc.data().watchlist;\n              var index = newWatchlist.indexOf(thisMovie);\n\n              if (index > -1) {\n                currentState.setState({\n                  isAdd: true\n                });\n              }\n            }).catch(function (error) {\n              console.log(\"Error getting document:\", error);\n            });\n          }\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(\"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movies: data\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n  /* checkExists(id) {\r\n    if (this.state.isAdd === \"false\") {\r\n      console.log(\"isadd\")\r\n      db.collection(\"user\")\r\n        .doc(auth.currentUser.email)\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(id)\r\n          if (index > -1) {\r\n            this.setState({\r\n              isAdd: true\r\n            })\r\n          }\r\n          })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n        this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n  } */\n\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email);\n\n    if (this.state.isAdd) {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        var index = newWatchlist.indexOf(id);\n\n        if (index > -1) {\n          newWatchlist.splice(index, 1);\n        }\n\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    } else {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        newWatchlist.push(id);\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    }\n  }\n\n  render() {\n    if (this.state.movie) {\n      console.log(\"this.state.movie: \", this.state.movie);\n    }\n\n    if (this.state.movies) {\n      console.log(\"this.state.movies: \", this.state.movies);\n      console.log(\"this.state.movies.Director: \", this.state.movies.Director);\n    }\n\n    return React.createElement(Container, {\n      key: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, this.state.movie ? React.createElement(\"div\", {\n      id: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"title-and-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      title: \"if u stan imdb...\",\n      className: \"movie-title\",\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      href: \"https://www.imdb.com/title/\" + this.state.movie.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, this.state.movie.title, \" (\", this.state.movie.year, \")\"), React.createElement(\"div\", {\n      className: \"movie-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => {\n        this.setWatchList(this.state.movie.id);\n      },\n      className: \"movie-rl-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, this.state.isAdd ? React.createElement(TiMinusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }) : React.createElement(TiPlusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), \"watchlist\"))), React.createElement(CardGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Card, {\n      id: \"poster\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.movie.poster ? React.createElement(CardImg, {\n      top: true,\n      width: \"100%\",\n      src: this.state.movie.poster,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }) : \"\"), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Directed by: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, this.state.movies.Director))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, this.state.movies.Rated, \" | \", this.state.movies.Runtime, \" | \", this.state.movies.Released)), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"Countries Released: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, this.state.movies.Country, \" \"))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Translations: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, this.state.movies.Language))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"IMDb rating: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, this.state.movies.imdbRating))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Metascore: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, this.state.movies.Metascore))), this.state.movies.Production ? React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Production: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, this.state.movies.Production))) : \"\", React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Awards: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.state.movies.Awards))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"Plot: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, this.state.movies.Plot))))), React.createElement(\"div\", {\n      className: \"movie-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Cast\"), React.createElement(CardGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(CardText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    })), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, this.state.movie.cast ? this.state.movie.cast.map(item => {\n      return React.createElement(Row, {\n        key: \"yay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        title: \"visit fav actor\",\n        className: \"movie-actor-link\",\n        rel: \"noopener noreferrer\",\n        target: \"_blank\",\n        href: 'https://www.imdb.com/name/' + item.actor_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, item.actor), \" as \", item.character));\n    }) : \"\"))) : React.createElement(Media, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"wait a sec bru\"));\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["C:/Users/molli/Desktop/full-stack/movie-fanatic-club/movie-fanatic-club/src/components/Movie.js"],"names":["React","TiPlusOutline","TiMinusOutline","auth","db","firebase","Button","Card","CardGroup","CardText","CardTitle","CardSubtitle","Container","Row","Col","Media","CardImg","Movie","Component","constructor","props","state","movie","movies","loading","isAdd","thisMovie","isMounted","addToWatchlist","bind","removeFromWatchlist","watchlistRef","collection","doc","currentUser","email","update","watchlist","firestore","FieldValue","arrayUnion","id","alert","setWatchList","checkExists","arrayRemove","componentDidMount","setState","fetch","location","method","headers","then","response","json","data","onAuthStateChanged","user","currentState","docRef","get","newWatchlist","index","indexOf","catch","error","console","log","err","userRef","splice","push","render","Director","title","year","poster","Rated","Runtime","Released","Country","Language","imdbRating","Metascore","Production","Awards","Plot","cast","map","item","actor_id","actor","character"],"mappings":"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","sourcesContent":["// body component for loading stuff about an individual movie\r\n// when the user clicks on it\r\n\r\nimport React from \"react\";\r\nimport \"../index.css\";\r\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\r\nimport { auth, db } from \"./Firebase\";\r\nimport firebase from \"firebase\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardGroup,\r\n  CardText,\r\n  CardTitle,\r\n  CardSubtitle,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Media,\r\n  CardImg\r\n} from \"reactstrap\";\r\n\r\nclass Movie extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      movie: {},\r\n      movies: {},\r\n      loading: true,\r\n      isAdd: false,\r\n      thisMovie: \"\",\r\n      isMounted: false\r\n    };\r\n\r\n    this.addToWatchlist = this.addToWatchlist.bind(this);\r\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\r\n  }\r\n\r\n  addToWatchlist() {\r\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\r\n    watchlistRef.update({\r\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\r\n    });\r\n    alert(\"adding to watchlist\");\r\n    this.setWatchList = this.setWatchList.bind(this)\r\n    this.checkExists = this.checkExists.bind(this)\r\n  }\r\n\r\n  removeFromWatchlist() {\r\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\r\n    watchlistRef.update({\r\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\r\n    });\r\n    alert(\"removing from watchlist\");\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({ isMounted: true })\r\n\r\n    fetch(\r\n      \"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" +\r\n      this.props.location.id,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"x-rapidapi-host\":\r\n            \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\r\n        }\r\n      }\r\n    )\r\n      .then(response => {\r\n        response.json().then(data => {\r\n          this.setState({\r\n            movie: data,\r\n            thisMovie: data.id\r\n          })\r\n\r\n          auth.onAuthStateChanged(user => {\r\n            let currentState = this, thisMovie = currentState.state.thisMovie\r\n            if (user && currentState.state.isMounted && thisMovie !== \"\") {\r\n              var docRef = db.collection(\"user\").doc(auth.currentUser.email);\r\n              docRef\r\n                .get()\r\n                .then(function (doc) {\r\n                  var newWatchlist = doc.data().watchlist;\r\n                  var index = newWatchlist.indexOf(thisMovie)\r\n                  if (index > -1) {\r\n                    currentState.setState({\r\n                      isAdd: true\r\n                    })\r\n                  }\r\n\r\n                })\r\n                .catch(function (error) {\r\n                  console.log(\"Error getting document:\", error);\r\n                });\r\n            }\r\n          })\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n    fetch(\r\n      \"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id\r\n    )\r\n      .then(response => {\r\n        response.json().then(data => {\r\n          this.setState({\r\n            movies: data\r\n          })\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n  }\r\n\r\n\r\n  /* checkExists(id) {\r\n    if (this.state.isAdd === \"false\") {\r\n      console.log(\"isadd\")\r\n      db.collection(\"user\")\r\n        .doc(auth.currentUser.email)\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(id)\r\n          if (index > -1) {\r\n            this.setState({\r\n              isAdd: true\r\n            })\r\n          }\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n  } */\r\n\r\n  setWatchList(id) {\r\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email)\r\n    if (this.state.isAdd) {\r\n      userRef\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(id)\r\n          if (index > -1) {\r\n            newWatchlist.splice(index, 1)\r\n          }\r\n          userRef.update({\r\n            watchlist: newWatchlist\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n    else {\r\n      userRef\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          newWatchlist.push(id)\r\n          userRef.update({\r\n            watchlist: newWatchlist\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.movie) {\r\n      console.log(\"this.state.movie: \", this.state.movie);\r\n    }\r\n    if (this.state.movies) {\r\n      console.log(\"this.state.movies: \", this.state.movies);\r\n      console.log(\"this.state.movies.Director: \", this.state.movies.Director);\r\n    }\r\n\r\n    return (\r\n      <Container key=\"\">\r\n        {this.state.movie ?\r\n          <div id=\"card-body\">\r\n            <div id=\"title-and-btn\">\r\n              <a title=\"if u stan imdb...\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={\"https://www.imdb.com/title/\" + this.state.movie.id}>{this.state.movie.title} ({this.state.movie.year})</a>\r\n              <div className=\"movie-btn\">\r\n                <Button\r\n                  onClick={() => {\r\n                    this.setWatchList(this.state.movie.id)\r\n                  }}\r\n                  className=\"movie-rl-btn\">{this.state.isAdd ? <TiMinusOutline /> : <TiPlusOutline />}\r\n                watchlist\r\n              </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <CardGroup>\r\n              <Card id=\"poster\">\r\n                {this.state.movie.poster ?\r\n                  <CardImg top width=\"100%\" src={this.state.movie.poster}>\r\n                  </CardImg>\r\n                  : \"\"}\r\n              </Card>\r\n              <Card>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Directed by: <div className=\"movie-info-inline\">{this.state.movies.Director}</div></div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-info\">{this.state.movies.Rated} | {this.state.movies.Runtime} | {this.state.movies.Released}</div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Countries Released: <div className=\"movie-info\">{this.state.movies.Country} </div></div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Translations: <div className=\"movie-info\">{this.state.movies.Language}</div></div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">IMDb rating: <div className=\"movie-info-inline\">{this.state.movies.imdbRating}</div></div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Metascore: <div className=\"movie-info-inline\">{this.state.movies.Metascore}</div></div>\r\n                </CardSubtitle>\r\n                {this.state.movies.Production ?\r\n                  <CardSubtitle>\r\n                    <div className=\"movie-director\">Production: <div className=\"movie-info-inline\">{this.state.movies.Production}</div></div>\r\n                  </CardSubtitle> : \"\"}\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Awards: <div className=\"movie-info\">{this.state.movies.Awards}</div></div>\r\n                </CardSubtitle>\r\n                <CardSubtitle>\r\n                  <div className=\"movie-director\">Plot: <div className=\"movie-info\">{this.state.movies.Plot}</div></div>\r\n                </CardSubtitle>\r\n              </Card>\r\n            </CardGroup>\r\n            <div className=\"movie-title\">Cast</div>\r\n            <CardGroup>\r\n              <Card>\r\n                <CardText>\r\n                </CardText>\r\n              </Card>\r\n              <Card>\r\n                {this.state.movie.cast ?\r\n                  this.state.movie.cast.map(item => {\r\n                    return (\r\n                      <Row key=\"yay\"><div className=\"movie-actor\">\r\n                        <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}>{item.actor}</a> as {item.character}\r\n                      </div></Row>\r\n                    )\r\n                  })\r\n                  : \"\"}\r\n              </Card>\r\n            </CardGroup>\r\n          </div>\r\n          : <Media>wait a sec bru</Media>}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Movie;\r\n"]},"metadata":{},"sourceType":"module"}