{"ast":null,"code":"import _classCallCheck from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lishi/Desktop/fullstack/movie-fanatic-club/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";// body component for loading stuff about an individual movie\n// when the user clicks on it\nimport React from\"react\";import\"../index.css\";import{Media,Container,Row,Button}from\"reactstrap\";import{TiPlusOutline,TiMinusOutline}from\"react-icons/ti\";import{auth,db}from\"./Firebase\";import firebase from\"firebase\";var Movie=/*#__PURE__*/function(_React$Component){_inherits(Movie,_React$Component);function Movie(props){var _this;_classCallCheck(this,Movie);_this=_possibleConstructorReturn(this,_getPrototypeOf(Movie).call(this,props));_this.state={movie:{},movies:{},loading:true,isAdd:false};_this.addToWatchlist=_this.addToWatchlist.bind(_assertThisInitialized(_this));_this.removeFromWatchlist=_this.removeFromWatchlist.bind(_assertThisInitialized(_this));return _this;}_createClass(Movie,[{key:\"addToWatchlist\",value:function addToWatchlist(){var watchlistRef=db.collection(\"user\").doc(auth.currentUser.email);watchlistRef.update({watchlist:firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)});alert(\"adding to watchlist\");this.setWatchList=this.setWatchList.bind(this);this.checkExists=this.checkExists.bind(this);}},{key:\"removeFromWatchlist\",value:function removeFromWatchlist(){var watchlistRef=db.collection(\"user\").doc(auth.currentUser.email);watchlistRef.update({watchlist:firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)});alert(\"removing from watchlist\");}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\"+this.props.location.id,{method:\"GET\",headers:{\"x-rapidapi-host\":\"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\"x-rapidapi-key\":\"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"}}).then(function(response){response.json().then(function(data){_this2.setState({movie:data});});}).catch(function(err){console.log(err);});fetch(\"https://www.omdbapi.com/?apikey=1e54e73e&i=\"+this.props.location.id).then(function(response){response.json().then(function(data){_this2.setState({movies:data});});}).catch(function(err){console.log(err);});}},{key:\"checkExists\",value:function checkExists(id){if(this.state.isAdd===\"false\"){console.log(\"isadd\");db.collection(\"user\").doc(auth.currentUser.email).get().then(function(doc){var newWatchlist=doc.data().watchlist;var index=newWatchlist.indexOf(id);if(index>-1){this.setState({isAdd:true});}}).catch(function(error){console.log(error);});this.setState({isAdd:!this.state.isAdd});}}},{key:\"setWatchList\",value:function setWatchList(id){var userRef=db.collection(\"user\").doc(auth.currentUser.email);if(this.state.isAdd){userRef.get().then(function(doc){var newWatchlist=doc.data().watchlist;var index=newWatchlist.indexOf(id);if(index>-1){newWatchlist.splice(index,1);}userRef.update({watchlist:newWatchlist});}).catch(function(error){console.log(error);});this.setState({isAdd:!this.state.isAdd});}else{userRef.get().then(function(doc){var newWatchlist=doc.data().watchlist;newWatchlist.push(id);userRef.update({watchlist:newWatchlist});}).catch(function(error){console.log(error);});this.setState({isAdd:!this.state.isAdd});}}},{key:\"render\",value:function render(){var _this3=this;if(this.state.isAdd==='false'&&this.state.movie.id){console.log(\"check\");db.collection(\"user\").doc(auth.currentUser.email).get().then(function(doc){var newWatchlist=doc.data().watchlist;var index=newWatchlist.indexOf(this.state.movie.id);if(index>-1){this.setState({isAdd:true});}}).catch(function(error){console.log(error);});}return React.createElement(Container,null,this.state.movie?React.createElement(\"div\",null,React.createElement(Row,null,React.createElement(\"a\",{title:\"if u stan imdb...\",className:\"movie-title\",rel:\"noopener noreferrer\",target:\"_blank\",href:\"https://www.imdb.com/title/\"+this.state.movie.id},this.state.movie.title,\" (\",this.state.movie.year,\")\")),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-poster\"},this.state.movie.poster?React.createElement(\"a\",{title:\"trailer is here!\",className:\"movie-title\",rel:\"noopener noreferrer\",target:\"_blank\",href:this.state.movie.trailer?this.state.movie.trailer.link:\"/\"},React.createElement(\"img\",{className:\"movie-actual-poster\",alt:this.state.movie.title,src:this.state.movie.poster})):\"\")),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-director\"},\"directed by: \",this.state.movies.Director)),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Rated,\" | \",this.state.movies.Runtime,\" | \",this.state.movies.Released)),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-info\"},this.state.movies.Country,\" | \",this.state.movies.Language)),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-info\"},\"IMDb rating: \",this.state.movies.imdbRating,\" | Metascore: \",this.state.movies.Metascore)),this.state.movies.Production?React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-director\"},\"this.state.movies.Production\")):\"\",React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-info\"},\"AWARDS: \",this.state.movies.Awards)),React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-info\"},\"PLOT: \",this.state.movies.Plot)),this.state.movie.cast?this.state.movie.cast.map(function(item){return React.createElement(Row,{key:\"\"},React.createElement(\"div\",{className:\"movie-actor\"},React.createElement(\"a\",{title:\"visit fav actor\",className:\"movie-actor-link\",rel:\"noopener noreferrer\",target:\"_blank\",href:'https://www.imdb.com/name/'+item.actor_id},item.actor),\" as \",item.character));}):\"\",React.createElement(Row,null,React.createElement(\"div\",{className:\"movie-btn\"},React.createElement(Button,{onClick:function onClick(){_this3.setWatchList(_this3.state.movie.id);},onMouseEnter:function onMouseEnter(){_this3.checkExists(_this3.state.movie.id);},className:\"movie-rl-btn\"},this.state.isAdd?React.createElement(TiMinusOutline,null):React.createElement(TiPlusOutline,null),\"watchlist\")))):React.createElement(Media,null,\"wait a sec bru\"));}}]);return Movie;}(React.Component);export default Movie;","map":{"version":3,"sources":["/home/lishi/Desktop/fullstack/movie-fanatic-club/src/components/Movie.js"],"names":["React","Media","Container","Row","Button","TiPlusOutline","TiMinusOutline","auth","db","firebase","Movie","props","state","movie","movies","loading","isAdd","addToWatchlist","bind","removeFromWatchlist","watchlistRef","collection","doc","currentUser","email","update","watchlist","firestore","FieldValue","arrayUnion","id","alert","setWatchList","checkExists","arrayRemove","fetch","location","method","headers","then","response","json","data","setState","catch","err","console","log","get","newWatchlist","index","indexOf","error","userRef","splice","push","title","year","poster","trailer","link","Director","Rated","Runtime","Released","Country","Language","imdbRating","Metascore","Production","Awards","Plot","cast","map","item","actor_id","actor","character","Component"],"mappings":"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","sourcesContent":["// body component for loading stuff about an individual movie\n// when the user clicks on it\n\nimport React from \"react\";\nimport \"../index.css\";\nimport { Media, Container, Row, Button } from \"reactstrap\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false\n    };\n\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this)\n    this.checkExists = this.checkExists.bind(this)\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  componentDidMount() {\n    fetch(\n      \"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" +\n      this.props.location.id,\n      {\n        method: \"GET\",\n        headers: {\n          \"x-rapidapi-host\":\n            \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n          \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n        }\n      }\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movie: data\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n\n    fetch(\n      \"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movies: data\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n\n  checkExists(id) {\n    if (this.state.isAdd === \"false\") {\n      console.log(\"isadd\")\n      db.collection(\"user\")\n        .doc(auth.currentUser.email)\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          var index = newWatchlist.indexOf(id)\n          if (index > -1) {\n            this.setState({\n              isAdd: true\n            })\n          }\n\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n  }\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email)\n    if (this.state.isAdd) {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          var index = newWatchlist.indexOf(id)\n          if (index > -1) {\n            newWatchlist.splice(index, 1)\n          }\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n    else {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          newWatchlist.push(id)\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n  }\n\n  render() {\n    if (this.state.isAdd === 'false' && this.state.movie.id) {\n      console.log(\"check\")\n      db.collection(\"user\")\n        .doc(auth.currentUser.email)\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          var index = newWatchlist.indexOf(this.state.movie.id)\n          if (index > -1) {\n            this.setState({\n              isAdd: true\n            })\n          }\n\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    }\n\n    return (\n      <Container>\n        {this.state.movie ?\n          <div>\n            <Row>\n              <a title=\"if u stan imdb...\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={\"https://www.imdb.com/title/\" + this.state.movie.id}>{this.state.movie.title} ({this.state.movie.year})</a>\n            </Row>\n            <Row>\n              <div className=\"movie-poster\">\n                {this.state.movie.poster ?\n                  <a title=\"trailer is here!\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={this.state.movie.trailer ? this.state.movie.trailer.link : \"/\"}>\n                    <img className=\"movie-actual-poster\" alt={this.state.movie.title} src={this.state.movie.poster} />\n                  </a>\n                  : \"\"}\n\n              </div>\n            </Row>\n            <Row><div className=\"movie-director\">directed by: {this.state.movies.Director}</div></Row>\n            <Row><div className=\"movie-info\">{this.state.movies.Rated} | {this.state.movies.Runtime} | {this.state.movies.Released}</div></Row>\n            <Row><div className=\"movie-info\">{this.state.movies.Country} | {this.state.movies.Language}</div></Row>\n            <Row><div className=\"movie-info\">IMDb rating: {this.state.movies.imdbRating} | Metascore: {this.state.movies.Metascore}</div></Row>\n            {this.state.movies.Production ?\n              <Row><div className=\"movie-director\">this.state.movies.Production</div></Row> : \"\"}\n            <Row><div className=\"movie-info\">AWARDS: {this.state.movies.Awards}</div></Row>\n            <Row><div className=\"movie-info\">PLOT: {this.state.movies.Plot}</div></Row>\n            {this.state.movie.cast ?\n              this.state.movie.cast.map(item => {\n                return (\n                  <Row key=\"\"><div className=\"movie-actor\">\n                    <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}>{item.actor}</a> as {item.character}\n                  </div></Row>\n                )\n              })\n              : \"\"}\n            <Row>\n              <div className=\"movie-btn\">\n                <Button\n                  onClick={() => {\n                    this.setWatchList(this.state.movie.id)\n                  }}\n                  onMouseEnter={() => {\n                    this.checkExists(this.state.movie.id)\n                  }}\n                  className=\"movie-rl-btn\">{this.state.isAdd ? <TiMinusOutline /> : <TiPlusOutline />}\n                watchlist\n              </Button>\n\n              </div>\n            </Row>\n          </div>\n          : <Media>wait a sec bru</Media>}\n      </Container>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}