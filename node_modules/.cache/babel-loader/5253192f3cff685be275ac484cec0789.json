{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\molli\\\\Desktop\\\\full-stack\\\\movie-fanatic-club\\\\movie-fanatic-club\\\\src\\\\components\\\\Movie.js\";\n// body component for loading stuff about an individual movie\n// when the user clicks on it\nimport React, { useEffect } from \"react\";\nimport \"../index.css\";\nimport { Media, Container, Row, Button } from \"reactstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false\n    };\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this);\n    this.checkExists = this.checkExists.bind(this);\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  componentDidMount() {\n    fetch(\"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" + this.props.location.id, {\n      method: \"GET\",\n      headers: {\n        \"x-rapidapi-host\": \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n        \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n      }\n    }).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movie: data\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(\"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movies: data\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  checkExists(id) {\n    if (this.state.isAdd === \"false\") {\n      console.log(\"isadd\");\n      db.collection(\"user\").doc(auth.currentUser.email).get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        var index = newWatchlist.indexOf(id);\n\n        if (index > -1) {\n          this.setState({\n            isAdd: true\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    }\n  }\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email);\n\n    if (this.state.isAdd) {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        var index = newWatchlist.indexOf(id);\n\n        if (index > -1) {\n          newWatchlist.splice(index, 1);\n        }\n\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    } else {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        newWatchlist.push(id);\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    }\n  }\n\n  render() {\n    if (this.state.isAdd === 'false' && this.state.movie.id) {\n      console.log(\"check\");\n      db.collection(\"user\").doc(auth.currentUser.email).get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        var index = newWatchlist.indexOf(this.state.movie.id);\n\n        if (index > -1) {\n          this.setState({\n            isAdd: true\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, this.state.movie ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      title: \"if u stan imdb...\",\n      className: \"movie-title\",\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      href: \"https://www.imdb.com/title/\" + this.state.movie.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, this.state.movie.title, \" (\", this.state.movie.year, \")\")), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-poster\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, this.state.movie.poster ? React.createElement(\"a\", {\n      title: \"trailer is here!\",\n      className: \"movie-title\",\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      href: this.state.movie.trailer ? this.state.movie.trailer.link : \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"movie-actual-poster\",\n      alt: this.state.movie.title,\n      src: this.state.movie.poster,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    })) : \"\")), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"directed by: \", this.state.movies.Director)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, this.state.movies.Rated, \" | \", this.state.movies.Runtime, \" | \", this.state.movies.Released)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, this.state.movies.Country, \" | \", this.state.movies.Language)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"IMDb rating: \", this.state.movies.imdbRating, \" | Metascore: \", this.state.movies.Metascore)), this.state.movies.Production ? React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"this.state.movies.Production\")) : \"\", React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"AWARDS: \", this.state.movies.Awards)), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"PLOT: \", this.state.movies.Plot)), this.state.movie.cast ? this.state.movie.cast.map(item => {\n      return React.createElement(Row, {\n        key: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"movie-actor-link\",\n        rel: \"noopener noreferrer\",\n        target: \"_blank\",\n        href: 'https://www.imdb.com/name/' + item.actor_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, item.actor), \" as \", item.character));\n    }) : \"\", React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => {\n        this.setWatchList(this.state.movie.id);\n      },\n      onMouseEnter: () => {\n        this.checkExists(this.state.movie.id);\n      },\n      className: \"movie-rl-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, this.state.isAdd ? React.createElement(TiMinusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }) : React.createElement(TiPlusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), \"watchlist\")))) : React.createElement(Media, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"wait a sec bru\"));\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["C:/Users/molli/Desktop/full-stack/movie-fanatic-club/movie-fanatic-club/src/components/Movie.js"],"names":["React","useEffect","Media","Container","Row","Button","NavLink","TiPlusOutline","TiMinusOutline","auth","db","firebase","Movie","Component","constructor","props","state","movie","movies","loading","isAdd","addToWatchlist","bind","removeFromWatchlist","watchlistRef","collection","doc","currentUser","email","update","watchlist","firestore","FieldValue","arrayUnion","id","alert","setWatchList","checkExists","arrayRemove","componentDidMount","fetch","location","method","headers","then","response","json","data","setState","catch","err","console","log","get","newWatchlist","index","indexOf","error","userRef","splice","push","render","title","year","poster","trailer","link","Director","Rated","Runtime","Released","Country","Language","imdbRating","Metascore","Production","Awards","Plot","cast","map","item","actor_id","actor","character"],"mappings":"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","sourcesContent":["// body component for loading stuff about an individual movie\r\n// when the user clicks on it\r\n\r\nimport React, { useEffect } from \"react\";\r\nimport \"../index.css\";\r\nimport { Media, Container, Row, Button } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\r\nimport { auth, db } from \"./Firebase\";\r\nimport firebase from \"firebase\";\r\n\r\nclass Movie extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      movie: {},\r\n      movies: {},\r\n      loading: true,\r\n      isAdd: false\r\n    };\r\n\r\n    this.addToWatchlist = this.addToWatchlist.bind(this);\r\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\r\n  }\r\n\r\n  addToWatchlist() {\r\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\r\n    watchlistRef.update({\r\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\r\n    });\r\n    alert(\"adding to watchlist\");\r\n    this.setWatchList = this.setWatchList.bind(this)\r\n    this.checkExists = this.checkExists.bind(this)\r\n  }\r\n\r\n  removeFromWatchlist() {\r\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\r\n    watchlistRef.update({\r\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\r\n    });\r\n    alert(\"removing from watchlist\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(\r\n      \"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" +\r\n      this.props.location.id,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"x-rapidapi-host\":\r\n            \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\r\n        }\r\n      }\r\n    )\r\n      .then(response => {\r\n        response.json().then(data => {\r\n          this.setState({\r\n            movie: data\r\n          })\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n    fetch(\r\n      \"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id\r\n    )\r\n      .then(response => {\r\n        response.json().then(data => {\r\n          this.setState({\r\n            movies: data\r\n          })\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n\r\n  checkExists(id) {\r\n    if (this.state.isAdd === \"false\") {\r\n      console.log(\"isadd\")\r\n      db.collection(\"user\")\r\n        .doc(auth.currentUser.email)\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(id)\r\n          if (index > -1) {\r\n            this.setState({\r\n              isAdd: true\r\n            })\r\n          }\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n  }\r\n\r\n  setWatchList(id) {\r\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email)\r\n    if (this.state.isAdd) {\r\n      userRef\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(id)\r\n          if (index > -1) {\r\n            newWatchlist.splice(index, 1)\r\n          }\r\n          userRef.update({\r\n            watchlist: newWatchlist\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n    else {\r\n      userRef\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          newWatchlist.push(id)\r\n          userRef.update({\r\n            watchlist: newWatchlist\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n\r\n      this.setState({\r\n        isAdd: !this.state.isAdd\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.isAdd === 'false' && this.state.movie.id) {\r\n      console.log(\"check\")\r\n      db.collection(\"user\")\r\n        .doc(auth.currentUser.email)\r\n        .get()\r\n        .then(function (doc) {\r\n          var newWatchlist = doc.data().watchlist;\r\n          var index = newWatchlist.indexOf(this.state.movie.id)\r\n          if (index > -1) {\r\n            this.setState({\r\n              isAdd: true\r\n            })\r\n          }\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error)\r\n        })\r\n    }\r\n\r\n    return (\r\n      <Container>\r\n        {this.state.movie ?\r\n          <div>\r\n            <Row>\r\n              <a title=\"if u stan imdb...\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={\"https://www.imdb.com/title/\" + this.state.movie.id}>{this.state.movie.title} ({this.state.movie.year})</a>\r\n            </Row>\r\n            <Row>\r\n              <div className=\"movie-poster\">\r\n                {this.state.movie.poster ?\r\n                  <a title=\"trailer is here!\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={this.state.movie.trailer ? this.state.movie.trailer.link : \"/\"}>\r\n                    <img className=\"movie-actual-poster\" alt={this.state.movie.title} src={this.state.movie.poster} />\r\n                  </a>\r\n                  : \"\"}\r\n\r\n              </div>\r\n            </Row>\r\n            <Row><div className=\"movie-director\">directed by: {this.state.movies.Director}</div></Row>\r\n            <Row><div className=\"movie-info\">{this.state.movies.Rated} | {this.state.movies.Runtime} | {this.state.movies.Released}</div></Row>\r\n            <Row><div className=\"movie-info\">{this.state.movies.Country} | {this.state.movies.Language}</div></Row>\r\n            <Row><div className=\"movie-info\">IMDb rating: {this.state.movies.imdbRating} | Metascore: {this.state.movies.Metascore}</div></Row>\r\n            {this.state.movies.Production ?\r\n              <Row><div className=\"movie-director\">this.state.movies.Production</div></Row> : \"\"}\r\n            <Row><div className=\"movie-info\">AWARDS: {this.state.movies.Awards}</div></Row>\r\n            <Row><div className=\"movie-info\">PLOT: {this.state.movies.Plot}</div></Row>\r\n            {this.state.movie.cast ?\r\n              this.state.movie.cast.map(item => {\r\n                return (\r\n                  <Row key=\"\"><div className=\"movie-actor\">\r\n                    <a className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}>{item.actor}</a> as {item.character}\r\n                  </div></Row>\r\n                )\r\n              })\r\n              : \"\"}\r\n            <Row>\r\n              <div className=\"movie-btn\">\r\n                <Button\r\n                  onClick={() => {\r\n                    this.setWatchList(this.state.movie.id)\r\n                  }}\r\n                  onMouseEnter={() => {\r\n                    this.checkExists(this.state.movie.id)\r\n                  }}\r\n                  className=\"movie-rl-btn\">{this.state.isAdd ? <TiMinusOutline /> : <TiPlusOutline />}\r\n                watchlist\r\n              </Button>\r\n\r\n              </div>\r\n            </Row>\r\n          </div>\r\n          : <Media>wait a sec bru</Media>}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Movie;\r\n"]},"metadata":{},"sourceType":"module"}