{"ast":null,"code":"var _jsxFileName = \"/home/lishi/Desktop/fullstack/movie-fanatic-club/src/components/Movie.js\";\n// body component for loading stuff about an individual movie\n// when the user clicks on it\nimport React from \"react\";\nimport \"../index.css\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\nimport { Button, Card, CardGroup, CardSubtitle, Container, Row, Media, CardImg } from \"reactstrap\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false,\n      thisMovie: \"\",\n      isMounted: false\n    };\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this);\n    this.checkExists = this.checkExists.bind(this);\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  async componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    fetch(\"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" + this.props.location.id, {\n      method: \"GET\",\n      headers: {\n        \"x-rapidapi-host\": \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n        \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n      }\n    }).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movie: data,\n          thisMovie: data.id\n        });\n        auth.onAuthStateChanged(user => {\n          let currentState = this,\n              thisMovie = currentState.state.thisMovie;\n\n          if (user && currentState.state.isMounted && thisMovie !== \"\") {\n            var docRef = db.collection(\"user\").doc(auth.currentUser.email);\n            docRef.get().then(function (doc) {\n              var newWatchlist = doc.data().watchlist;\n              var index = newWatchlist.indexOf(thisMovie);\n\n              if (index > -1) {\n                currentState.setState({\n                  isAdd: true\n                });\n              }\n            }).catch(function (error) {\n              console.log(\"Error getting document:\", error);\n            });\n          }\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(\"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id).then(response => {\n      response.json().then(data => {\n        this.setState({\n          movies: data\n        });\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email);\n\n    if (this.state.isAdd) {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        var index = newWatchlist.indexOf(id);\n\n        if (index > -1) {\n          newWatchlist.splice(index, 1);\n        }\n\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    } else {\n      userRef.get().then(function (doc) {\n        var newWatchlist = doc.data().watchlist;\n        newWatchlist.push(id);\n        userRef.update({\n          watchlist: newWatchlist\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      this.setState({\n        isAdd: !this.state.isAdd\n      });\n    }\n  }\n\n  render() {\n    {\n      /* \n      The purpose of the code inside this 'render' is to map over the cast of the movie and divide them evenly into two arrays, because I want to\n      display the cast in two columns instead of one so that the page doesn't end up being too long. This way we can map over each of these two arrays\n      in their own card and build some html to return   \n      */\n    }\n    var arr1 = [];\n    var arr2 = [];\n    var counter = 0;\n\n    if (this.state.movie.cast !== undefined) {\n      this.state.movie.cast.map(item => {\n        if (counter % 2 === 0) {\n          arr1.push(item);\n        } else {\n          arr2.push(item);\n        }\n\n        counter++;\n      });\n    }\n\n    return React.createElement(Container, {\n      key: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, this.state.movie ? React.createElement(\"div\", {\n      id: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"title-and-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      title: \"if u stan imdb...\",\n      className: \"movie-title\",\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      href: \"https://www.imdb.com/title/\" + this.state.movie.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.state.movie.title, \" (\", this.state.movie.year, \")\")), React.createElement(CardGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Card, {\n      id: \"poster\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, this.state.movie.poster ? React.createElement(CardImg, {\n      top: true,\n      width: \"100%\",\n      src: this.state.movie.poster,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }) : \"\"), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => {\n        this.setWatchList(this.state.movie.id);\n      },\n      className: \"movie-rl-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, this.state.isAdd ? React.createElement(TiMinusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }) : React.createElement(TiPlusOutline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), \"watchlist\")), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.state.movies.Rated, \" | \", this.state.movies.Runtime, \" | \", this.state.movies.Released)), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Directed by: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, this.state.movies.Director))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Countries Released: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, this.state.movies.Country, \" \"))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Translations: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, this.state.movies.Language))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"IMDb rating: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.state.movies.imdbRating))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Metascore: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, this.state.movies.Metascore))), this.state.movies.Production ? React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Production: \", React.createElement(\"div\", {\n      className: \"movie-info-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, this.state.movies.Production))) : \"\", React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Awards: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, this.state.movies.Awards))), React.createElement(CardSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie-director\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \"Plot: \", React.createElement(\"div\", {\n      className: \"movie-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, this.state.movies.Plot))))), React.createElement(\"div\", {\n      className: \"movie-title-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Cast\"), React.createElement(CardGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, arr1 ? arr1.map(item => {\n      return React.createElement(Row, {\n        key: \"yay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        title: \"visit fav actor\",\n        className: \"movie-actor-link\",\n        rel: \"noopener noreferrer\",\n        target: \"_blank\",\n        href: 'https://www.imdb.com/name/' + item.actor_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, item.actor)), \" \", React.createElement(\"div\", {\n        className: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \" as \"), React.createElement(\"div\", {\n        className: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, item.character)));\n    }) : \"\"), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, arr2 ? arr2.map(item => {\n      return React.createElement(Row, {\n        key: \"yay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        title: \"visit fav actor\",\n        className: \"movie-actor-link\",\n        rel: \"noopener noreferrer\",\n        target: \"_blank\",\n        href: 'https://www.imdb.com/name/' + item.actor_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"actor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, item.actor)), \" \", React.createElement(\"div\", {\n        className: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \" as \"), React.createElement(\"div\", {\n        className: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, item.character)));\n    }) : \"\"))) : React.createElement(Media, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"wait a sec bru\"));\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["/home/lishi/Desktop/fullstack/movie-fanatic-club/src/components/Movie.js"],"names":["React","TiPlusOutline","TiMinusOutline","auth","db","firebase","Button","Card","CardGroup","CardSubtitle","Container","Row","Media","CardImg","Movie","Component","constructor","props","state","movie","movies","loading","isAdd","thisMovie","isMounted","addToWatchlist","bind","removeFromWatchlist","watchlistRef","collection","doc","currentUser","email","update","watchlist","firestore","FieldValue","arrayUnion","id","alert","setWatchList","checkExists","arrayRemove","componentDidMount","setState","fetch","location","method","headers","then","response","json","data","onAuthStateChanged","user","currentState","docRef","get","newWatchlist","index","indexOf","catch","error","console","log","err","userRef","splice","push","render","arr1","arr2","counter","cast","undefined","map","item","title","year","poster","Rated","Runtime","Released","Director","Country","Language","imdbRating","Metascore","Production","Awards","Plot","actor_id","actor","character"],"mappings":"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","sourcesContent":["// body component for loading stuff about an individual movie\n// when the user clicks on it\n\nimport React from \"react\";\nimport \"../index.css\";\nimport { TiPlusOutline, TiMinusOutline } from \"react-icons/ti\";\nimport { auth, db } from \"./Firebase\";\nimport firebase from \"firebase\";\nimport {\n  Button,\n  Card,\n  CardGroup,\n  CardSubtitle,\n  Container,\n  Row,\n  Media,\n  CardImg\n} from \"reactstrap\";\n\nclass Movie extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: {},\n      movies: {},\n      loading: true,\n      isAdd: false,\n      thisMovie: \"\",\n      isMounted: false\n    };\n\n    this.addToWatchlist = this.addToWatchlist.bind(this);\n    this.removeFromWatchlist = this.removeFromWatchlist.bind(this);\n  }\n\n  addToWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayUnion(this.state.movie.id)\n    });\n    alert(\"adding to watchlist\");\n    this.setWatchList = this.setWatchList.bind(this)\n    this.checkExists = this.checkExists.bind(this)\n  }\n\n  removeFromWatchlist() {\n    var watchlistRef = db.collection(\"user\").doc(auth.currentUser.email);\n    watchlistRef.update({\n      watchlist: firebase.firestore.FieldValue.arrayRemove(this.state.movie.id)\n    });\n    alert(\"removing from watchlist\");\n  }\n\n  async componentDidMount() {\n    this.setState({ isMounted: true })\n\n    fetch(\n      \"https://imdb-internet-movie-database-unofficial.p.rapidapi.com/film/\" +\n      this.props.location.id,\n      {\n        method: \"GET\",\n        headers: {\n          \"x-rapidapi-host\":\n            \"imdb-internet-movie-database-unofficial.p.rapidapi.com\",\n          \"x-rapidapi-key\": \"c3bfcbae69msh2fefac5f7da67adp1d2687jsnade70055f49b\"\n        }\n      }\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movie: data,\n            thisMovie: data.id\n          })\n\n          auth.onAuthStateChanged(user => {\n            let currentState = this, thisMovie = currentState.state.thisMovie\n            if (user && currentState.state.isMounted && thisMovie !== \"\") {\n              var docRef = db.collection(\"user\").doc(auth.currentUser.email);\n              docRef\n                .get()\n                .then(function (doc) {\n                  var newWatchlist = doc.data().watchlist;\n                  var index = newWatchlist.indexOf(thisMovie)\n                  if (index > -1) {\n                    currentState.setState({\n                      isAdd: true\n                    })\n                  }\n\n                })\n                .catch(function (error) {\n                  console.log(\"Error getting document:\", error);\n                });\n            }\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n\n    fetch(\n      \"https://www.omdbapi.com/?apikey=1e54e73e&i=\" + this.props.location.id\n    )\n      .then(response => {\n        response.json().then(data => {\n          this.setState({\n            movies: data\n          })\n        })\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  setWatchList(id) {\n    let userRef = db.collection(\"user\").doc(auth.currentUser.email)\n    if (this.state.isAdd) {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          var index = newWatchlist.indexOf(id)\n          if (index > -1) {\n            newWatchlist.splice(index, 1)\n          }\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n    else {\n      userRef\n        .get()\n        .then(function (doc) {\n          var newWatchlist = doc.data().watchlist;\n          newWatchlist.push(id)\n          userRef.update({\n            watchlist: newWatchlist\n          })\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n      this.setState({\n        isAdd: !this.state.isAdd\n      })\n    }\n  }\n\n  render() {\n    {/* \n    The purpose of the code inside this 'render' is to map over the cast of the movie and divide them evenly into two arrays, because I want to\n    display the cast in two columns instead of one so that the page doesn't end up being too long. This way we can map over each of these two arrays\n    in their own card and build some html to return   \n    */}\n    var arr1 = [];\n    var arr2 = [];\n    var counter = 0;\n\n    if (this.state.movie.cast !== undefined) {\n      this.state.movie.cast.map(item => {\n        if (counter % 2 === 0) {\n          arr1.push(item);\n        } else {\n          arr2.push(item);\n        }\n        counter++;\n      })\n    }\n\n    return (\n      <Container key=\"\">\n        {this.state.movie ?\n          <div id=\"card-body\">\n            <div id=\"title-and-btn\">\n              <a title=\"if u stan imdb...\" className=\"movie-title\" rel=\"noopener noreferrer\" target=\"_blank\" href={\"https://www.imdb.com/title/\" + this.state.movie.id}>{this.state.movie.title} ({this.state.movie.year})</a>\n              \n            </div>\n\n            <CardGroup>\n              <Card id=\"poster\">\n                {this.state.movie.poster ?\n                  <CardImg top width=\"100%\" src={this.state.movie.poster}>\n                  </CardImg>\n                  : \"\"}\n              </Card>\n              <Card>\n              <div className=\"movie-btn\">\n                <Button\n                  onClick={() => {\n                    this.setWatchList(this.state.movie.id)\n                  }}\n                  className=\"movie-rl-btn\">{this.state.isAdd ? <TiMinusOutline /> : <TiPlusOutline />}\n                watchlist\n              </Button>\n              </div>\n                <CardSubtitle>\n                  <div className=\"movie-info\">{this.state.movies.Rated} | {this.state.movies.Runtime} | {this.state.movies.Released}</div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Directed by: <div className=\"movie-info-inline\">{this.state.movies.Director}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Countries Released: <div className=\"movie-info\">{this.state.movies.Country} </div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Translations: <div className=\"movie-info\">{this.state.movies.Language}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">IMDb rating: <div className=\"movie-info-inline\">{this.state.movies.imdbRating}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Metascore: <div className=\"movie-info-inline\">{this.state.movies.Metascore}</div></div>\n                </CardSubtitle>\n                {this.state.movies.Production ?\n                  <CardSubtitle>\n                    <div className=\"movie-director\">Production: <div className=\"movie-info-inline\">{this.state.movies.Production}</div></div>\n                  </CardSubtitle> : \"\"}\n                <CardSubtitle>\n                  <div className=\"movie-director\">Awards: <div className=\"movie-info\">{this.state.movies.Awards}</div></div>\n                </CardSubtitle>\n                <CardSubtitle>\n                  <div className=\"movie-director\">Plot: <div className=\"movie-info\">{this.state.movies.Plot}</div></div>\n                </CardSubtitle>\n              </Card>\n            </CardGroup>\n            <div className=\"movie-title-2\">Cast</div>\n            <CardGroup>\n              <Card>\n                {arr1 ?\n                  arr1.map(item => {\n                    return (\n                      <Row key=\"yay\"><div className=\"movie-actor\">\n                        <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}><div className=\"actor\">{item.actor}</div></a> <div className=\"character\"> as </div><div className=\"character\">{item.character}</div>\n                      </div></Row>\n                    )\n                  })\n                  : \"\"}\n              </Card>\n              <Card>\n                {arr2 ?\n                  arr2.map(item => {\n                    return (\n                      <Row key=\"yay\"><div className=\"movie-actor\">\n                        <a title=\"visit fav actor\" className=\"movie-actor-link\" rel=\"noopener noreferrer\" target=\"_blank\" href={'https://www.imdb.com/name/' + item.actor_id}><div className=\"actor\">{item.actor}</div></a> <div className=\"character\"> as </div><div className=\"character\">{item.character}</div>\n                      </div></Row>\n                    )\n                  })\n                  : \"\"}\n              </Card>\n            </CardGroup>\n          </div>\n          : <Media>wait a sec bru</Media>}\n      </Container>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}